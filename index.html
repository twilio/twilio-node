<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
<head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="chrome=1"/>
    <meta name="viewport" content="width=device-width"/>
    <link rel="canonical" href="http://twilio.com"/>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
    <title>twilio-node</title>
    <style>
        body {
            font-size: 14px;
            line-height: 22px;
            background: #f4f4f4;
            color: #000;
            font-family: Helvetica Neue, Helvetica, Arial;
        }

        .interface {
            font-family: "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, sans-serif !important;
        }

        div#sidebar {
            background: #fff;
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            width: 200px;
            overflow-y: auto;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
            padding: 15px 0 30px 30px;
            border-right: 1px solid #bbb;
            box-shadow: 0 0 20px #ccc;
            -webkit-box-shadow: 0 0 20px #ccc;
            -moz-box-shadow: 0 0 20px #ccc;
        }

        a.toc_title, a.toc_title:visited {
            display: block;
            color: black;
            font-weight: bold;
            margin-top: 15px;
        }

        a.toc_title:hover {
            text-decoration: underline;
        }

        #sidebar .version {
            font-size: 10px;
            font-weight: normal;
        }

        ul.toc_section {
            font-size: 11px;
            line-height: 14px;
            margin: 5px 0 0 0;
            padding-left: 0px;
            list-style-type: none;
            font-family: Lucida Grande;
        }

        .toc_section li {
            cursor: pointer;
            margin: 0 0 3px 0;
        }

        .toc_section li a {
            text-decoration: none;
            color: black;
        }

        .toc_section li a:hover {
            text-decoration: underline;
        }

        div.container {
            width: 550px;
            margin: 40px 0 50px 260px;
        }

        div.warning {
            margin-top: 15px;
            font: bold 11px Arial;
            color: #770000;
        }

        p {
            margin: 20px 0;
            width: 550px;
        }

        a, a:visited {
            color: #444;
        }

        a:active, a:hover {
            color: #000;
        }

        h1, h2, h3, h4, h5, h6 {
            padding-top: 20px;
        }

        h2 {
            font-size: 20px;
        }

        b.header {
            font-size: 16px;
            line-height: 30px;
        }

        span.alias {
            font-size: 14px;
            font-style: italic;
            margin-left: 20px;
        }

        table, tr, td {
            margin: 0;
            padding: 0;
        }

        td {
            padding: 2px 12px 2px 0;
        }

        table .rule {
            height: 1px;
            background: #ccc;
            margin: 5px 0;
        }

        ul {
            list-style-type: circle;
            padding: 0 0 0 20px;
        }

        li {
            width: 500px;
            margin-bottom: 10px;
        }

        code, pre, tt {
            font-family: Monaco, Consolas, "Lucida Console", monospace;
            font-size: 12px;
            line-height: 18px;
            font-style: normal;
        }

        tt {
            padding: 0px 3px;
            background: #fff;
            border: 1px solid #ddd;
            zoom: 1;
        }

        code {
            margin-left: 20px;
        }

        pre {
            font-size: 12px;
            padding: 2px 0 2px 15px;
            border-left: 5px solid #bbb;
            margin: 0px 0 30px;
        }

        @media only screen and (-webkit-min-device-pixel-ratio: 1.5) and (max-width: 640px), only screen and (-o-min-device-pixel-ratio: 3/2) and (max-width: 640px), only screen and (min-device-pixel-ratio: 1.5) and (max-width: 640px) {
            img {
                max-width: 100%;
            }

            div#sidebar {
                -webkit-overflow-scrolling: initial;
                position: relative;
                width: 90%;
                height: 120px;
                left: 0;
                top: -7px;
                padding: 10px 0 10px 30px;
                border: 0;
            }

            img#logo {
                width: auto;
                height: auto;
            }

            div.container {
                margin: 0;
                width: 100%;
            }

            p, div.container ul {
                max-width: 98%;
                overflow-x: scroll;
            }

            pre {
                overflow: scroll;
            }
        }
    </style>
</head>
<body>

<a href="https://github.com/kwhinnery/twilio-node"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>

<div id="sidebar" class="interface">
    <span class="toc_title">
        twilio-node <span class="version">(0.8.1)</span>
    </span>

    <a class="toc_title" href="#">
        Introduction
    </a>
    <ul class="toc_section">
        <li>- <a href="#installation">Installation</a></li>
        <li>- <a href="#quickstart">Quick Start</a></li>
        <li>- <a href="#moreexamples">More Examples</a></li>
    </ul>

    <a class="toc_title" href="#restapi">
        RestClient
    </a>
    <ul class="toc_section">
        <li>- <a href="#structure">How This API is Structured</a></li>
        <li>- <a href="#constructor">RestClient Constructor</a></li>
        <li>- <a href="#request">request</a></li>
    </ul>

    <a class="toc_title" href="#restResources">
        Resource Listing
    </a>
    <ul class="toc_section">
        <li>- <a href="#resourceRequests">Request Argument Format</a></li>
        <li>- <a href="#accounts">accounts</a></li>
        <li>- <a href="#availablePhoneNumbers">availablePhoneNumbers</a></li>
        <li>- <a href="#outgoingCallerIds">outgoingCallerIds</a></li>
        <li>- <a href="#incomingPhoneNumbers">incomingPhoneNumbers</a></li>
        <li>- <a href="#smsMessages">sms.messages</a></li>
        <li>- <a href="#shortCodes">sms.shortCodes</a></li>
        <li>- <a href="#applications">applications</a></li>
        <li>- <a href="#connectApps">connectApps</a></li>
        <li>- <a href="#authorizedConnectApps">authorizedConnectApps</a></li>
        <li>- <a href="#calls">calls</a></li>
        <li>- <a href="#conferences">conferences</a></li>
        <li>- <a href="#queues">queues</a></li>
        <li>- <a href="#recordings">recordings</a></li>
        <li>- <a href="#transcriptions">transcriptions</a></li>
        <li>- <a href="#notifications">notifications</a></li>
        <li>- <a href="#usageRecords">usage.records</a></li>
        <li>- <a href="#usageTriggers">usage.triggers</a></li>
    </ul>

    <a class="toc_title" href="#twimlResponse">
        TwimlResponse
    </a>
    <ul class="toc_section">
        <li>- <a href="#twimlResponse">Constructor</a></li>
        <li>- <a href="#twimlBasic">TwiML Basics</a></li>
        <li>- <a href="#twimlChained">Chaining Syntax</a></li>
        <li>- <a href="#twimlNesting">Nesting Syntax</a></li>
    </ul>

    <a class="toc_title" href="#capability">
        Capability
    </a>
    <ul class="toc_section">
        <li>- <a href="#capability">Constructor</a></li>
        <li>- <a href="#allowClientIncoming">allowClientIncoming</a></li>
        <li>- <a href="#allowClientOutgoing">allowClientOutgoing</a></li>
        <li>- <a href="#generate">generate</a></li>
    </ul>

    <a class="toc_title" href="#utilities">
        Utilities
    </a>
    <ul class="toc_section">
        <li>- <a href="#validateRequest">validateRequest</a></li>
        <li>- <a href="#validateExpressRequest">validateExpressRequest</a></li>
    </ul>

    <a class="toc_title" href="#links">
        Links
    </a>

    <a class="toc_title" href="#changelog">
        Change Log
    </a>

</div>

<div class="container">

    <p id="introduction">
        <img id="logo" src="twilio.png" alt="Twilio: Cloud Communications"/>
    </p>

    <p>
        The Twilio platform makes adding voice, SMS, and VoIP capabilities to
        your applications ridiculously simple. This helper library for node
        aims to make it even easier. This documentation page code and format is
        adapted from the awesome/utilitary format used to document the popular
        <a href="http://backbonejs.org">Backbone</a> and
        <a href="http://underscorejs.org/">Underscore</a> JavaScript frameworks,
        created by <a href="https://twitter.com/jashkenas">Jeremy Ashkenas</a>
        and other open source contributors.
    </p>

    <p>
        The twilio-node project is
        <a href="http://github.com/kwhinnery/twilio-node/">hosted on GitHub</a>.
        You can report bugs and discuss features on the
        <a href="http://github.com/kwhinnery/twilio-node/issues">issues page</a>,
        on Freenode in the <tt>#twilio</tt> channel,
        or send tweets to <a href="http://twitter.com/kevinwhinnery">@kevinwhinnery</a>.
    </p>

    <h2 id="installation">Installation</h2>

    <p>twilio-node is available as an npm package. Install the latest version with:</p>
<pre>
npm install twilio
</pre>

    <h2 id="quickstart">Quick Start</h2>
    <p>
        To begin using Twilio to make voice calls, send SMS, and create VoIP clients, you first
        need to <a href="https://www.twilio.com/try-twilio">sign up for an account</a>.  After
        signing up, you will be able to access an account SID and auth token which will be used
        to authenticate requests to the Twilio back end.  This information can be found on
        <a href="https://www.twilio.com/user/account">your dashboard</a>:
    </p>
    <p>
        <img src="twilio-dashboard.png" alt="dashboard screenshot"/>
    </p>
    <p>
        With these credentials, you can begin to use this node module, as in the following example:
    </p>
<pre>
//require the Twilio module and create a REST client
var client = require('twilio')('ACCOUNT_SID', 'AUTH_TOKEN');

//Send an SMS text message
client.sendSms({

    to:'+16515556677', // Any number Twilio can deliver to
    from: '+14506667788', // A number you bought from Twilio and can use for outbound communication
    body: 'word to your mother.' // body of the SMS message

}, function(err, responseData) { //this function is executed when a response is received from Twilio

    if (!err) { // "err" is an error received during the request, if any

        // "responseData" is a JavaScript object containing data received from Twilio.
        // A sample response from sending an SMS message is here (click "JSON" to see how the data appears in JavaScript):
        // http://www.twilio.com/docs/api/rest/sending-sms#example-1

        console.log(responseData.from); // outputs "+14506667788"
        console.log(responseData.body); // outputs "word to your mother."

    }
});

//Place a phone call, and respond with TwiML instructions from the given URL
client.makeCall({

    to:'+16515556677', // Any number Twilio can call
    from: '+14506667788', // A number you bought from Twilio and can use for outbound communication
    url: 'http://www.example.com/twiml.php' // A URL that produces an XML document (TwiML) which contains instructions for the call

}, function(err, responseData) {

    //executed when the call has been initiated.
    console.log(responseData.from); // outputs "+14506667788"

});

//Loop through a list of SMS messages sent from a given number
client.listSms({
    from:'+16512223333'
}, function (err, responseData) {
    responseData.smsMessages.forEach(function(message) {
        console.log('Message sent on: '+message.dateCreated.toLocaleDateString());
        console.log(message.body);
    });
});

</pre>

    <h2 id="moreexamples">More Examples</h2>
    <p>
        More examples can be found in the "spec" directory of
        <a href="http://github.com/kwhinnery/twilio-node">this project on GitHub</a>, as Jasmine unit tests.
    </p>

    <div id="documentation">

        <h2 id="restapi">RestClient</h2>

        <p>
            <tt>RestClient</tt> exposes the REST API of Twilio, but takes care of content negotiation and
            HTTP requests for you. The client object is intended to mirror the API pretty directly, so the existing
            <a href="http://www.twilio.com/docs/api/rest">REST API reference</a> will be a good source of information
            on what each function does. The major resources and available methods for the REST API will be described here,
            along with shorthand where it exists.
        </p>

        <p id="structure">
            <b class="header">How This API is Structured</b><br/>
            The <tt>RestClient</tt> API is intended to be self-documenting, mapping very closely to the actual
            <a href="http://twilio.com/docs/rest">REST API</a>.  Once you have created a client object,
            the object structure looks very much like the Twilio REST URIs, using a chained JavaScript syntax:
        </p>
<pre>
// Create a client:
var client = require('twilio')('ACCOUNT_SID', 'AUTH_TOKEN');

//Get a list of calls made by this account
// GET /2010-04-01/Accounts/ACCOUNT_SID/Calls
// alias for get is "list", if you prefer
client.calls.get(function(err, responseData) {
    //work with call list in responseData
});

//Get a list of calls made by this account, from this phone number
// GET /2010-04-01/Accounts/ACCOUNT_SID/Calls?From=+16513334455
client.calls.get({
    from:'+16513334455'
}, function(err, responseData) {
    //work with call list in responseData
});

//Get data for a specific call
// GET /2010-04-01/Accounts/ACCOUNT_SID/Calls/abc123...
client.calls('abc123...').get(function(err, responseData) {
    //work with responseData
});

//Get data for a specific call, for a specific account
// GET /2010-04-01/Accounts/AC.../Calls/abc123...
client.accounts('AC...').calls('abc123...').get(function(err, responseData) {
    //work with responseData
});

// Create (send) an SMS message
// POST /2010-04-01/Accounts/ACCOUNT_SID/SMS/Messages
// "create" and "update" aliases are in place where appropriate on PUT and POST requests
client.sms.messages.post({
    to:'+16515559999',
    from:'+14503334455',
    body:'word to your mother.'
}, function(err, responseData) {
    //work with responseData
});

// Delete a TwiML application
// DELETE /2010-04-01/Accounts/ACCOUNT_SID/Applications/APP...
client.applications('APP...').delete(function(err, responseData, nodeResponse) {
    //delete sends back a 204 on complete, with no error
    assert(!err);
    assert(nodeResponse.statusCode === 204);
});

</pre>

        <p>
            Any resource request you make can be done for a specific
            <a href="http://www.twilio.com/docs/api/rest/subaccounts">subaccount</a> as well.
            This lets you track usage of calls, text messages, etc. for different users of your
            application.  By default, all requests are made using the "master" account, but using
            the "accounts" resource allows you to make all the same requests, but for a specific account:
        </p>

<pre>
var client = require('twilio')('ACCOUNT_SID', 'AUTH_TOKEN'),
    SOME_SUBACCOUNT_SID = 'AC...';

//Send a text message, associated with the given subaccount
client.accounts(SOME_SUBACCOUNT_SID).sms.messages.create({
    to:'+16512223333',
    from:'+14505556677',
    body:'word to your subaccount mother.'
}, function(err, data) {
    //do something when text is sent
});

//This REST call using the master/default account for the client...
client.makeCall({
    to:'+16512223333',
    from:'+14505556677',
    url:'http://example.com/someTwiml.php'
}, function(err, data) {
    //handle response
});

//...is the same as...
client.accounts(ACCOUNT_SID).calls.create({
    to:'+16512223333',
    from:'+14505556677',
    url:'http://example.com/someTwiml.php'
}, function(err, data) {
    //handle response
});
</pre>

        <p id="constructor">
            <b class="header">twilio.RestClient</b><code>twilio.RestClient([accountSid, authToken, clientOptions])</code>
            <br/>

            Creates a new REST client object, using the given account SID and auth token, as available on your
            <a href="https://www.twilio.com/user/account">Twilio dashboard</a> when
            <a href="https://www.twilio.com/try-twilio">create an account</a> and log in.
            These credentials are used to <a href="http://www.twilio.com/docs/security">authorize</a> your requests
            to the Twilio back end. REST clients can be created for
            <a href="http://www.twilio.com/docs/api/rest/subaccounts">subaccounts</a>,
            but requests will then only be authorized to access resources associated with that subaccount.

            <br/><br/>
            If you omit the <tt>accountSid</tt> and <tt>authToken</tt> parameters, the module will attempt
            to initialize the client with environment variables, as found in <tt>process.env.TWILIO_ACCOUNT_SID</tt> and
            <tt>process.env.TWILIO_AUTH_TOKEN</tt>.  For production web applications, storing account crendentials in
            environment variables can be useful, so that sensitive information is never checked in to source control.

            <ul>
                <li><b>accountSid:</b> {string} Twilio account SID</li>
                <li><b>authToken:</b> {string} Twilio auth token</li>
                <li>
                    <b>[optional] clientOptions:</b> {object} an object hash with client config options:
                    <ul>
                        <li><b>apiVersion:</b> The Twilio API version - defaults to <tt>2010-04-01</tt></li>
                        <li><b>host:</b> The Twilio API endpoint to hit - defaults to <tt>api.twilio.com</tt></li>
                    </ul>
                </li>
            </ul>
        </p>
        <p>Example:</p>
<pre>
//Two-liner
var twilio = require('twilio');
var client = new twilio.RestClient('ACCOUNT_SID', 'AUTH_TOKEN');

//Two-liner, with environment variables set
var twilio = require('twilio');
var client = new twilio.RestClient();

//One-liner
var client = require('twilio')('ACCOUNT_SID', 'AUTH_TOKEN');

//One-liner, with environment variables set
var client = require('twilio')();
</pre>

        <p id="request">
            <b class="header">request</b><code>client.request(requestOptions[, callback])</code>
            <br/>
            Makes an authenticated HTTP request against the Twilio back end. Typically, an end user
            <b>WILL NOT</b> use this function, but rather one of the resource-specific functions or
            shorthand functions.

            <ul>
                <li>
                    <b>requestOptions:</b> {object} HTTP request arguments,
                    same as <a href="https://github.com/mikeal/request">the request module</a>.
                </li>
                <li>
                    <b>[optional] callback:</b> {function} a callback function which receives the following
                    arguments, in order, after a request completes:
                    <ul>
                        <li><b>error:</b> An error object, if an error is received</li>
                        <li><b>responseData:</b>A JavaScript object, <tt>JSON.parse</tt>'d response from the Twilio HTTP response</li>
                        <li>
                            <b>nodeClientResponse:</b>A node <tt>http.ClientResponse</tt> object
                            (<a href="http://nodejs.org/api/http.html#http_http_clientresponse">reference</a>).  This is also available
                            in responseData.nodeClientResponse.
                        </li>
                    </ul>
                </li>
            </ul>
        </p>
        <p>Example:</p>
<pre>
var twilio = require('twilio');
var client = new twilio.RestClient('ACCOUNT_SID', 'AUTH_TOKEN');

client.request({
    url:'/Accounts',
    method:'GET'
}, function (error, responseData, nodeClientResponse) {
    //work with response data
});
</pre>

        <h2 id="restResources">Resource Listing</h2>

        <p>
            The following is a listing of REST resources surfaced in the RestClient.  Supported list and
            instance functions are shown here, which should map 1:1 to the supported HTTP methods in the
            Twilio REST API (plus "create" and "update" aliases as relevant).
        </p>

        <p id="resourceRequests">
            <b class="header">Resource Request Argument Format</b><br/>
            All requests on Twilio REST resources follow the same format.  The first argument to a <tt>RestClient</tt>
            resource function is an optional JavaScript object hash of either query parameters for a <tt>GET</tt> or
            <tt>POST/PUT</tt> parameters which will be form-encoded and sent along with the request.  The second
            (or maybe only) argument is a callback which receives the same arguments as the
            callback function in the <a href="#request">direct request API</a>.  An example of the request format is below.
            Typically, Twilio REST APIs use upper-cased parameter names.  When using this client module, you can omit the
            upper-case first character if you wish.
        </p>
        <p>Examples:</p>
<pre>
//A sample request with both POST parameters, and a callback
client.sms.messages.create({

    //For an "update", "create", "post", or "put" request these properties are form-encoded and sent to Twilio:
    to:'+16515554466',
    from:'+14503334455',
    body:'word to your mother.'

}, function(err, responseData) { //this function is executed when a response is received from Twilio

    if (!err) { // "err" is an error received during the request, if any

        // "responseData" is a JavaScript object containing data received from Twilio.
        // A sample response from sending an SMS message is here (click "JSON" to see how the data appears in JavaScript):
        // http://www.twilio.com/docs/api/rest/sending-sms#example-1

        console.log(responseData.from); // outputs "+14506667788"
        console.log(responseData.body); // outputs "word to your mother."

        // you can also access the raw node.js http.ClientResponse object:
        // http://nodejs.org/api/http.html#http_http_clientresponse
        console.log(responseData.nodeClientResponse.statusCode); //outputs "200" if the request was successful

    }
});

//A sample request with no parameters, just a callback
client.accounts('AC...').calls.get(function (err, responseData) {
    //work with list of all calls for the given account
});

</pre>

        <p id="accounts">
            <b class="header">accounts</b><code>client.accounts([accountSid])</code>
            <br/>

            Accesses <a href="http://www.twilio.com/docs/api/rest/account">Account</a> resources via the REST interface.
            <p>
                <b>Instance Functions:</b>
                <ul>
                    <li><tt>client.accounts('someSid').get</tt></li>
                    <li><tt>client.accounts('someSid').post</tt></li>
                    <li><tt>client.accounts('someSid').put</tt></li>
                    <li><tt>client.accounts('someSid').list</tt> (alias for get)</li>
                    <li><tt>client.accounts('someSid').update</tt> (alias for put)</li>
                </ul>

                <b>List Functions:</b>
                <ul>
                    <li><tt>client.accounts.get</tt></li>
                    <li><tt>client.accounts.post</tt></li>
                    <li><tt>client.accounts.list</tt> (alias for get)</li>
                    <li><tt>client.accounts.create</tt> (alias for post)</li>
                </ul>
            </p>
        </p>
        <p>Examples:</p>
<pre>
//Get a list of subaccounts for this master account
client.accounts.list(function(err, data) {
    //work with response data
});

//Create a subaccount
client.accounts.create({
    friendlyName:'My Awesome Subaccount',
}, function(err, data) {
    //work with response data
});

//Update details for a subaccount with SID 'AC...'
client.accounts('AC...').update({
   friendlyName:'Something New'
}, function(err, data) {
    //work with response data
});
</pre>

        <p id="availablePhoneNumbers">
            <b class="header">availablePhoneNumbers</b><code>client.availablePhoneNumbers([IsoCountryCode]).[Local/TollFree]</code>
            <br/>

            Accesses <a href="http://www.twilio.com/docs/api/rest/available-phone-numbers">AvailablePhoneNumbers</a>
            resources via the REST interface.  Accessed primarily through Subresources for <tt>local</tt> and
            <tt>tollFree</tt> numbers.
            <p>
                <b>List Functions:</b>
                <ul>
                    <li><tt>client.availablePhoneNumbers('US').local.get</tt></li>
                    <li><tt>client.availablePhoneNumbers('GB').tollFree.get</tt></li>
                    <li><tt>client.availablePhoneNumbers('US').local.list</tt> (alias for get)</li>
                    <li><tt>client.availablePhoneNumbers('GB').tollFree.list</tt> (alias for get)</li>
                </ul>
            </p>
        </p>
        <p>Examples:</p>
<pre>
//Get a list of available local numbers for Canada
client.availablePhoneNumbers('CA').local.list(function(err, data) {
    //work with response data
});

//Get a list of available toll-free numbers for the United States
client.availablePhoneNumbers('US').tollFree.list(function(err, data) {
    //work with response data
});
</pre>

        <p id="outgoingCallerIds">
            <b class="header">outgoingCallerIds</b><code>client.outgoingCallerIds([callerIdSid])</code>
            <br/>

            Accesses <a href="http://www.twilio.com/docs/api/rest/outgoing-caller-ids">OutgoingCallerIds</a>
            resources via the REST interface.
            <p>
                <b>Instance Functions:</b>
                <ul>
                    <li><tt>client.outgoingCallerIds('someSid').get</tt></li>
                    <li><tt>client.outgoingCallerIds('someSid').post</tt></li>
                    <li><tt>client.outgoingCallerIds('someSid').put</tt></li>
                    <li><tt>client.outgoingCallerIds('someSid').delete</tt></li>
                    <li><tt>client.outgoingCallerIds('someSid').list</tt> (alias for get)</li>
                    <li><tt>client.outgoingCallerIds('someSid').update</tt> (alias for put)</li>
                </ul>

                <b>List Functions:</b>
                <ul>
                    <li><tt>client.outgoingCallerIds.get</tt></li>
                    <li><tt>client.outgoingCallerIds.post</tt></li>
                    <li><tt>client.outgoingCallerIds.list</tt> (alias for get)</li>
                    <li><tt>client.outgoingCallerIds.create</tt> (alias for post)</li>
                </ul>
            </p>
        </p>
        <p>Examples:</p>
<pre>
//Get a list of outgoing caller IDs for the master account
client.outgoingCallerIds.list(function(err, data) {
    //work with response data
});

//Update the friendly name for an outgoing caller ID (what is displayed to the callee)
client.outgoingCallerIds('callerIdSid').update({
    friendlyName:'Not a telemarketer :D'
}, function(err, data) {
    //work with response data
});
</pre>
        <p id="incomingPhoneNumbers">
            <b class="header">incomingPhoneNumbers</b><code>client.incomingPhoneNumbers([incomingNumberSid])</code>
            <br/>

            Accesses <a href="http://www.twilio.com/docs/api/rest/incoming-phone-numbers">IncomingPhoneNumbers</a>
            resources via the REST interface.  Includes subresources for local and toll free numbers.
        <p>
            <b>Instance Functions:</b>
        <ul>
            <li><tt>client.incomingPhoneNumbers('someSid').get</tt></li>
            <li><tt>client.incomingPhoneNumbers('someSid').post</tt></li>
            <li><tt>client.incomingPhoneNumbers('someSid').put</tt></li>
            <li><tt>client.incomingPhoneNumbers('someSid').delete</tt></li>
            <li><tt>client.incomingPhoneNumbers('someSid').list</tt> (alias for get)</li>
            <li><tt>client.incomingPhoneNumbers('someSid').update</tt> (alias for put)</li>
        </ul>

        <b>List Functions:</b>
        <ul>
            <li><tt>client.incomingPhoneNumbers.get</tt></li>
            <li><tt>client.incomingPhoneNumbers.post</tt></li>
            <li><tt>client.incomingPhoneNumbers.list</tt> (alias for get)</li>
            <li><tt>client.incomingPhoneNumbers.create</tt> (alias for post)</li>
            <li><tt>client.incomingPhoneNumbers.local.get</tt></li>
            <li><tt>client.incomingPhoneNumbers.local.post</tt></li>
            <li><tt>client.incomingPhoneNumbers.local.list</tt> (alias for local.get)</li>
            <li><tt>client.incomingPhoneNumbers.local.create</tt> (alias for local.post)</li>
            <li><tt>client.incomingPhoneNumbers.tollFree.get</tt></li>
            <li><tt>client.incomingPhoneNumbers.tollFree.post</tt></li>
            <li><tt>client.incomingPhoneNumbers.tollFree.list</tt> (alias for tollFree.get)</li>
            <li><tt>client.incomingPhoneNumbers.tollFree.create</tt> (alias for tollFree.post)</li>
        </ul>
        </p>
        </p>
        <p>Examples:</p>
<pre>
//Get a list of purchased (incoming) local numbers for an account, containing the digits 867
client.incomingPhoneNumbers.local.list({
    phoneNumber:867
}, function(err, data) {
    //work with response data
});

//Purchase a new phone number, which you looked up with the AvailablePhoneNumbers API
client.incomingPhoneNumbers.create({
    phoneNumber:'+16512221111'
}, function(err, data) {
    //work with response data
});
</pre>

        <p id="smsMessages">
            <b class="header">sms.messages</b><code>client.sms.messages([messageSid])</code>
            <br/>

            Accesses <a href="http://www.twilio.com/docs/api/rest/sms">SMS/Messages</a>
            resources via the REST interface.
        <p>
            <b>Instance Functions:</b>
            <ul>
                <li><tt>client.sms.messages('someSid').get</tt></li>
                <li><tt>client.getSms('someSid', callback)</tt> (shorthand to get a specific SMS, and specify a callback)</li>
            </ul>

            <b>List Functions:</b>
            <ul>
                <li><tt>client.sms.messages.get</tt></li>
                <li><tt>client.sms.messages.post</tt></li>
                <li><tt>client.sms.messages.list</tt> (alias for get)</li>
                <li><tt>client.sms.messages.create</tt> (alias for post)</li>
                <li><tt>client.sendSms</tt> (alias for post)</li>
                <li><tt>client.listSms</tt> (alias for get)</li>
            </ul>
        </p>
        </p>
        <p>Examples:</p>
<pre>
//Send (create) an SMS message with the master account, using shorthand
client.sendSms({
    to:'+16512221111',
    from:'+14502233344',
    body:'word to your mother.'
}, function(err, data) {
    //work with response data
});

//Get a list of SMS messages sent from a given subaccount
client.accounts('someAccountSid').sms.messages.list(function(err, data) {
    //work with response data
});
</pre>

        <p id="shortCodes">
            <b class="header">sms.shortCodes</b><code>client.sms.shortCodes([messageSid])</code>
            <br/>

            Accesses <a href="http://www.twilio.com/docs/api/rest/short-codes">SMS/ShortCodes</a>
            resources via the REST interface.
            <p>
                <b>Instance Functions:</b>
            <ul>
                <li><tt>client.sms.shortCodes('someSid').get</tt></li>
                <li><tt>client.sms.shortCodes('someSid').post</tt></li>
                <li><tt>client.sms.shortCodes('someSid').list</tt> (alias for get)</li>
                <li><tt>client.sms.shortCodes('someSid').update</tt> (alias for post)</li>
            </ul>

            <b>List Functions:</b>
            <ul>
                <li><tt>client.sms.shortCodes.get</tt></li>
                <li><tt>client.sms.shortCodes.list</tt> (alias for get)</li>
            </ul>
            </p>
        </p>
        <p>Examples:</p>
<pre>
//Get a list of SMS short codes used by a given account
client.accounts('someAccountSid').sms.shortCodes.list(function(err, data) {
    //work with response data
});
</pre>

        <p id="applications">
            <b class="header">applications</b><code>client.applications([applicationSid])</code>
            <br/>

            Accesses <a href="http://www.twilio.com/docs/api/rest/applications">Applications</a>
            resources via the REST interface.
        <p>
            <b>Instance Functions:</b>
            <ul>
                <li><tt>client.applications('someSid').get</tt></li>
                <li><tt>client.applications('someSid').post</tt></li>
                <li><tt>client.applications('someSid').delete</tt></li>
                <li><tt>client.applications('someSid').list</tt> (alias for get)</li>
                <li><tt>client.applications('someSid').update</tt> (alias for post)</li>
            </ul>

            <b>List Functions:</b>
            <ul>
                <li><tt>client.applications.get</tt></li>
                <li><tt>client.applications.post</tt></li>
                <li><tt>client.applications.list</tt> (alias for get)</li>
                <li><tt>client.applications.create</tt> (alias for post)</li>
            </ul>
            </p>
        </p>
        <p>Examples:</p>
<pre>
//Get a list of TwiML applications for the client's default account
client.applications.list(function(err, data) {
    //work with response data
});

//Update a TwiML application for the client's default account
client.applications('someSid').update({
    friendlyName:'Something new',
    VoiceUrl:'http://example.com/twiml.php'
}, function(err, data) {
    //work with response data
});
</pre>

        <p id="connectApps">
            <b class="header">connectApps</b><code>client.connectApps([applicationSid])</code>
            <br/>

            Accesses <a href="http://www.twilio.com/docs/api/rest/connect-apps">Connect Apps</a>
            resources via the REST interface.
        <p>
            <b>Instance Functions:</b>
            <ul>
                <li><tt>client.connectApps('someSid').get</tt></li>
                <li><tt>client.connectApps('someSid').post</tt></li>
                <li><tt>client.connectApps('someSid').list</tt> (alias for get)</li>
                <li><tt>client.connectApps('someSid').update</tt> (alias for post)</li>
            </ul>

            <b>List Functions:</b>
            <ul>
                <li><tt>client.connectApps.get</tt></li>
                <li><tt>client.connectApps.list</tt> (alias for get)</li>
            </ul>
            </p>
        </p>
        <p>Examples:</p>
<pre>
//Get a list of Twilio Connect applications for the client's default account
client.connectApps.list(function(err, data) {
    //work with response data
});

//Update a Connect application for the client's default account
client.connectApps('someSid').update({
    friendlyName:'Something new'
}, function(err, data) {
    //work with response data
});
</pre>

        <p id="authorizedConnectApps">
            <b class="header">authorizedConnectApps</b><code>client.authorizedConnectApps([applicationSid])</code>
            <br/>

            Accesses <a href="http://www.twilio.com/docs/api/rest/authorized-connect-apps">Authorized Connect Apps</a>
            resources via the REST interface.
            <p>
                <b>Instance Functions:</b>
            <ul>
                <li><tt>client.authorizedConnectApps('someSid').get</tt></li>
            </ul>

            <b>List Functions:</b>
            <ul>
                <li><tt>client.authorizedConnectApps.get</tt></li>
                <li><tt>client.authorizedConnectApps.list</tt> (alias for get)</li>
            </ul>
            </p>
        </p>
        <p>Examples:</p>
<pre>
//Get a list of authorized Twilio Connect applications for the client's default account
client.authorizedConnectApps.list(function(err, data) {
    //work with response data
});

//Get data about a specific authorized connect app
client.authorizedConnectApps('someSid').get(function(err, data) {
    //work with response data
});
</pre>

        <p id="calls">
            <b class="header">calls</b><code>client.calls([callSid])</code>
            <br/>

            Accesses <a href="http://www.twilio.com/docs/api/rest/call">Calls</a>
            resources via the REST interface.
            <p>
                <b>Instance Functions:</b>
            <ul>
                <li><tt>client.calls('someSid').get</tt></li>
                <li><tt>client.calls('someSid').post</tt></li>
                <li><tt>client.calls('someSid').update</tt> (alias for post)</li>
                <li><tt>client.calls('someSid').recordings.get</tt></li>
                <li><tt>client.calls('someSid').notifications.get</tt></li>
                <li><tt>client.getCall('someSid', callback)</tt> (shorthand for get)</li>
            </ul>

            <b>List Functions:</b>
            <ul>
                <li><tt>client.calls.get</tt></li>
                <li><tt>client.calls.post</tt></li>
                <li><tt>client.calls.list</tt> (alias for get)</li>
                <li><tt>client.calls.create</tt> (alias for post)</li>
                <li><tt>client.makeCall</tt> (alias for post)</li>
                <li><tt>client.listCalls</tt> (alias for get)</li>
            </ul>
            </p>
        </p>
        <p>Examples:</p>
<pre>
//Place a call
client.makeCall({
    to:'+16512223344',
    from:'+14503334455',
    url:'http://yourapp.com/twiml.jsp' // you're using JSP, right? :P
}, function(err, data) {
    //work with response data
});

//Get a list of recordings for a specifc call
client.calls('someSid').recordings.get(function(err, data) {
    //work with response data
});
</pre>

        <p id="conferences">
            <b class="header">conferences</b><code>client.conferences([conferenceSid])</code>
            <br/>

            Accesses <a href="http://www.twilio.com/docs/api/rest/conference">Conference</a>
            resources via the REST interface.
        <p>
            <b>Instance Functions:</b>
        <ul>
            <li><tt>client.conferences('someSid').get</tt></li>
            <li><tt>client.conferences('someSid').participants.get</tt></li>
            <li><tt>client.conferences('someSid').participants.list</tt> (alias for get)</li>
            <li><tt>client.conferences('someSid').participants('someSid').get</tt></li>
            <li><tt>client.conferences('someSid').participants('someSid').post</tt></li>
            <li><tt>client.conferences('someSid').participants('someSid').update</tt> (alias for post)</li>
            <li><tt>client.conferences('someSid').participants('someSid').delete</tt></li>
            <li><tt>client.conferences('someSid').participants('someSid').kick</tt> (alias for delete)</li>
        </ul>

        <b>List Functions:</b>
        <ul>
            <li><tt>client.conferences.get</tt></li>
            <li><tt>client.conferences.list</tt> (alias for get)</li>
        </ul>
        </p>
        </p>
        <p>Examples:</p>
<pre>
//Get a list of in-progress conferences for the master account
client.conferences.list({
    status:'in-progress'
}, function(err, data) {
    //work with response data
});
</pre>

        <p id="queues">
            <b class="header">queues</b><code>client.queues([queueSid])</code>
            <br/>

            Accesses <a href="http://www.twilio.com/docs/api/rest/queues">Queues</a>
            resources via the REST interface.
        <p>
            <b>Instance Functions:</b>
        <ul>
            <li><tt>client.queues('someSid').get</tt></li>
            <li><tt>client.queues('someSid').post</tt></li>
            <li><tt>client.queues('someSid').delete</tt></li>
            <li><tt>client.queues('someSid').update</tt> (alias for post)</li>
            <li><tt>client.queues('someSid').members('callSid').get</tt></li>
            <li><tt>client.queues('someSid').members('callSid').post</tt></li>
            <li><tt>client.queues('someSid').members('callSid').update</tt> (alias for post)</li>
            <li><tt>client.queues('someSid').members.front.get</tt></li>
            <li><tt>client.queues('someSid').members.front.post</tt></li>
            <li><tt>client.queues('someSid').members.front.update</tt> (alias for post)</li>
        </ul>

        <b>List Functions:</b>
        <ul>
            <li><tt>client.queues.get</tt></li>
            <li><tt>client.queues.post</tt></li>
            <li><tt>client.queues.list</tt> (alias for get)</li>
            <li><tt>client.queues.create</tt> (alias for post)</li>
        </ul>
        </p>
        </p>
        <p>Examples:</p>
<pre>
//Get a list of queues for the master account
client.queues.list(function(err, data) {
    //work with response data
});

//Create a call queue
client.queues.create({
    friendlyName:'Barbie Queue',
    maxSize:456
}, function(err, data) {
    //work with response data
});
</pre>

        <p id="recordings">
            <b class="header">recordings</b><code>client.recordings([recordingSid])</code>
            <br/>

            Accesses <a href="http://www.twilio.com/docs/api/rest/recording">Recordings</a>
            resources via the REST interface.
        <p>
            <b>Instance Functions:</b>
        <ul>
            <li><tt>client.recordings('someSid').get</tt></li>
            <li><tt>client.recordings('someSid').delete</tt></li>
            <li><tt>client.recordings('someSid').transcriptions.get</tt></li>
            <li><tt>client.recordings('someSid').transcriptions.list</tt> (alias for get)</li>
        </ul>

        <b>List Functions:</b>
        <ul>
            <li><tt>client.recordings.get</tt></li>
            <li><tt>client.recordings.list</tt> (alias for get)</li>
        </ul>
        </p>
        </p>
        <p>Examples:</p>
<pre>
//Get a list of recordings for the master account, for dates after September 11, 2010
client.recordings.list({
    'dateCreated>':'2010-09-11'
}, function(err, data) {
    //work with response data
});
</pre>

        <p id="transcriptions">
            <b class="header">transcriptions</b><code>client.transcriptions([transcriptionSid])</code>
            <br/>

            Accesses <a href="http://www.twilio.com/docs/api/rest/transcription">Transcriptions</a>
            resources via the REST interface.
        <p>
            <b>Instance Functions:</b>
        <ul>
            <li><tt>client.transcriptions('someSid').get</tt></li>
        </ul>

        <b>List Functions:</b>
        <ul>
            <li><tt>client.transcriptions.get</tt></li>
            <li><tt>client.transcriptions.list</tt> (alias for get)</li>
        </ul>
        </p>
        </p>
        <p>Examples:</p>
<pre>
//Get a list of transcriptions, with paging info, sorted by date updated
client.transcriptions.list(function(err, data) {
    //work with response data
    if (!err) {
        for (var i = 0, l = data.transcriptions.length; i < l; i++) {
            console.log(data.transcriptions[i].transcription_text);
        }
    }
});
</pre>

        <p id="notifications">
            <b class="header">notifications</b><code>client.notifications([notificationSid])</code>
            <br/>

            Accesses <a href="http://www.twilio.com/docs/api/rest/notification">Notification</a>
            resources via the REST interface.
        <p>
            <b>Instance Functions:</b>
        <ul>
            <li><tt>client.notifications('someSid').get</tt></li>
            <li><tt>client.notifications('someSid').delete</tt></li>
        </ul>

        <b>List Functions:</b>
        <ul>
            <li><tt>client.notifications.get</tt></li>
            <li><tt>client.notifications.list</tt> (alias for get)</li>
        </ul>
        </p>
        </p>
        <p>Examples:</p>
<pre>
//Get a list of notifications at the ERROR level, useful for debugging Twilio requests
client.notifications.list({
    log:0
}, function(err, data) {
    //work with response data
    if (!err) {
        for (var i = 0, l = data.notifications.length; i < l; i++) {
            console.log(data.notifications[i].message_text);
        }
    }
});
</pre>

        <p id="usageRecords">
            <b class="header">usage.records</b><code>client.usage.records([recordSid])</code>
            <br/>

            Accesses <a href="http://www.twilio.com/docs/api/rest/usage-records">Usage Records</a>
            resources via the REST interface.
        <p>
            <b>Instance Functions:</b>
        <ul>
            <li><tt>client.usage.records('someSid').get</tt></li>
        </ul>

        <b>List Functions:</b>
        <ul>
            <li><tt>client.usage.records.get</tt></li>
            <li><tt>client.usage.records.list</tt> (alias for get)</li>
        </ul>
        </p>
        </p>
        <p>Examples:</p>
<pre>
//Get a list of usage records for all SMS messages for the default account
client.usage.records.list({
    category:'sms'
}, function(err, data) {
    //work with response data
    if (!err) {
        for (var i = 0, l = data.usage_records.length; i < l; i++) {
            console.log(data.usage_records[i].count);
        }
    }
});
</pre>

        <p id="usageTriggers">
            <b class="header">usage.triggers</b><code>client.usage.triggers([triggerSid])</code>
            <br/>

            Accesses <a href="http://www.twilio.com/docs/api/rest/usage-triggers">Usage Triggers</a>
            resources via the REST interface.
        <p>
            <b>Instance Functions:</b>
        <ul>
            <li><tt>client.usage.triggers('someSid').get</tt></li>
            <li><tt>client.usage.triggers('someSid').post</tt></li>
            <li><tt>client.usage.triggers('someSid').delete</tt></li>
            <li><tt>client.usage.triggers('someSid').update</tt> (alias for post)</li>
        </ul>

        <b>List Functions:</b>
        <ul>
            <li><tt>client.usage.triggers.get</tt></li>
            <li><tt>client.usage.triggers.post</tt></li>
            <li><tt>client.usage.triggers.list</tt> (alias for get)</li>
            <li><tt>client.usage.triggers.create</tt> (alias for post)</li>
        </ul>
        </p>
        </p>
        <p>Examples:</p>
<pre>
//Get a list of usage triggers recurring daily
client.usage.triggers.list({
    recurring:'daily'
}, function(err, data) {
    //work with response data
    if (!err) {
        for (var i = 0, l = data.usage_triggers.length; i < l; i++) {
            console.log(data.usage_triggers[i].friendly_name);
        }
    }
});

//Create a new one-time usage trigger for SMS messages over 1,000
client.usage.triggers.create({
    usageCategory:'sms',
    triggerValue:1000,
    callbackUrl:'http://example.com/tellMeWhenIHitOneThousand'
}, function(err, data) {
    assert(!err);
    console.log(data.sid);
});
</pre>

        <h2 id="twimlResponse">TwimlResponse</h2>

        <p>
            When your Twilio application needs to respond to an incoming SMS message or
            voice call input, the developer gives Twilio instructions on what to do using a
            special XML instruction set called "TwiML".  The <tt>TwimlResponse</tt> object
            makes creating a proper TwiML XML string very easy.  The resulting TwiML string
            can be rendered to the end user using the node.js HTTP server APIs directly, or
            using a higher level web framework like <a href="http://expressjs.com">express</a>.
        </p>

        <p >
            <b class="header">Constructor</b><code>new twilio.TwimlResponse()</code>
            <br/>

            Create a <a href="http://www.twilio.com/docs/api/twiml">TwiML</a>
            response, which can later be serialized to XML.
        <p>
        <p>Example:</p>
<pre>
var twilio = require('twilio');
var resp = new twilio.TwimlResponse();
</pre>

        <p id="twimlBasic">
            <b class="header">TwiML Basics</b>
            <br/>
            
            The <tt>TwimlResponse</tt> object provides JavaScript functions to construct the
            <a href="http://www.twilio.com/docs/api/twiml">TwiML verbs</a> that are appropriate
            for the given parent node.  Each JavaScript function takes the following arguments, in any order:
            <ul>
                <li>an <tt>Object</tt> hash containing the attributes for the parent XML node, if any</li>
                <li>a <tt>String</tt> containing the content of the XML node (as in a <tt>&lt;Say&gt;</tt> verb)</li>
                <li>if a string is not specified, a <tt>Function</tt> which will build child nodes of this node</li>
            </ul>
        </p>
<pre>
var twilio = require('twilio');
var resp = new twilio.TwimlResponse();

resp.say('Welcome to Twilio!');
resp.say('Please let us know if we can help during your development.', {
    voice:'woman',
    language:'en-gb'
});

console.log(resp.toString());
/**
Outputs the following:
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Response&gt;
    &lt;Say&gt;Welcome to Twilio!&lt;/Say&gt;
    &lt;Say voice="woman" language="en-gb"&gt;Please let us know if we can help during your development.&lt;/Say&gt;
&lt;/Response&gt;
*/
</pre>

        <p>
            Rendering the actual XML document is done with the <tt>toString</tt> function.  The following node
            program would render a TwiML document when a request was received to the HTTP server running on port
            1337:
        </p>

<pre>
var http = require('http'),
    twilio = require('twilio');

http.createServer(function (req, res) {
    //Create TwiML response
    var twiml = new twilio.TwimlResponse();
    twiml.say('Hello World!');

    res.writeHead(200, {'Content-Type': 'text/xml'});
    res.end(twiml.toString());

}).listen(1337, '127.0.0.1');

console.log('TwiML servin\' server running at http://127.0.0.1:1337/');
</pre>

        <p id="twimlChained">
            <b class="header">Chaining Syntax</b>
            <br/>
            You can add multiple nodes to a TwiML document in a single statement by chaining function calls:
        </p>

<pre>
var twilio = require('twilio');
var resp = new twilio.TwimlResponse();

resp.say('Welcome to Twilio!')
    .pause({ length:3 })
    .say('Please let us know if we can help during your development.', {
        voice:'woman',
        language:'en-gb'
    })
    .play('http://www.example.com/some_sound.mp3');

console.log(resp.toString());
/**
Outputs the following:
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Response&gt;
    &lt;Say&gt;Welcome to Twilio!&lt;/Say&gt;
    &lt;Pause length="3"&gt;&lt;/Pause&gt;
    &lt;Say voice="woman" language="en-gb"&gt;Please let us know if we can help during your development.&lt;/Say&gt;
    &lt;Play&gt;http://www.example.com/some_sound.mp3&lt;/Play&gt;
&lt;/Response&gt;
*/
</pre>

        <p id="twimlNesting">
            <b class="header">Nesting TwiML Nodes</b>
            <br/>
            Some TwiML verbs have other nouns or verbs nested within them.  You can create these nested structures
            by passing a function to a parent node, which will be executed in the context of the parent node.
            Within this callback function, <tt>this</tt> will refer to the parent node, which will have JavaScript
            functions that map to the allowed syntax for child nodes of the parent:
        </p>

<pre>
var twilio = require('twilio');
var resp = new twilio.TwimlResponse();

resp.say('Welcome to Acme Customer Service!')
    .gather({
        action:'http://www.example.com/callFinished.php',
        finishOnKey:'*'
    }, function() {
        this.say('Press 1 for customer service')
            .say('Press 2 for British customer service', { language:'en-gb' });
    });

console.log(resp.toString());
/**
Outputs the following:
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Response&gt;
    &lt;Say&gt;Welcome to Acme Customer Service!&lt;/Say&gt;
    &lt;Gather action="http://www.example.com/callFinished.php" finishOnKey="*"&gt;
        &lt;Say&gt;Press 1 for customer service.&lt;/Say&gt;
        &lt;Say language="en-gb"&gt;Press 2 for British customer service.&lt;/Say&gt;
    &lt;/Gather&gt;
&lt;/Response&gt;
*/
</pre>

        <p>
            Alternately, the first argument to the child node building function is also a reference to the parent
            node, so the following code is equivalent:
        </p>

<pre>
var twilio = require('twilio');
var resp = new twilio.TwimlResponse();

resp.say('Welcome to Acme Customer Service!')
    .gather({
        action:'http://www.example.com/callFinished.php',
        finishOnKey:'*'
    }, function(node) { //note the use of the "node" variable in the anonymous function

        //Now you can use this reference as well, if using "this" wrankles you
        node.say('Press 1 for customer service')
            .say('Press 2 for British customer service', { language:'en-gb' });

    });

console.log(resp.toString());
/**
Outputs the following:
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;Response&gt;
    &lt;Say&gt;Welcome to Acme Customer Service!&lt;/Say&gt;
    &lt;Gather action="http://www.example.com/callFinished.php" finishOnKey="*"&gt;
        &lt;Say&gt;Press 1 for customer service.&lt;/Say&gt;
        &lt;Say language="en-gb"&gt;Press 2 for British customer service.&lt;/Say&gt;
    &lt;/Gather&gt;
&lt;/Response&gt;
*/
</pre>

        <h2 id="capability">Capability Token Generator</h2>

        <p>
            Using Twilio Client requires the use of a 
            <a href="http://www.twilio.com/docs/client/capability-tokens">capability token</a>,
            which enables client access to Twilio's VoIP platform.  These capability tokens can
            be used either <a href="http://www.twilio.com/docs/client/twilio-js">in the browser</a>
            or in native apps for <a href="http://www.twilio.com/docs/client/ios">iOS</a> and
            <a href="http://www.twilio.com/docs/client/android">Android</a>.  This utility is intended
            to allow node.js applications the ability to generate these capability tokens on the
            server side.  For a complete node example using the express web framework, check out the
            <a href="https://github.com/kwhinnery/twilio-node/tree/master/examples">examples</a> on
            GitHub.
        </p>

        <p>
            <b class="header">Constructor</b><code>new twilio.Capability(accountSid, authToken)</code>
            <br/>

            Create a capability token generator for use with Twilio Client.

            <ul>
                <li><b>accountSid:</b> {string} Twilio account SID</li>
                <li><b>authToken:</b> {string} Twilio auth token</li>
            </ul>
        <p>
        <p>Example:</p>
<pre>
var twilio = require('twilio');
var capability = new twilio.Capability(ACCOUNT_SID, AUTH_TOKEN);
</pre>

        <p id="allowClientIncoming">
            <b class="header">allowClientIncoming</b><code>capability.allowClientIncoming(clientName)</code>
            <br/>

            Add a capability to the token generator which will allow incoming calls to the given <tt>clientName</tt>.

            <ul>
                <li><b>clientName:</b> {string} the name of client which will accept incoming calls</li>
            </ul>
        <p>
        <p>Example:</p>
<pre>
var twilio = require('twilio');
var capability = new twilio.Capability(ACCOUNT_SID, AUTH_TOKEN);

//Create a capability token for a client named "jenny"
capability.allowClientIncoming('jenny');
var token = capability.generate();
</pre>

        <p id="allowClientOutgoing">
            <b class="header">allowClientOutgoing</b><code>capability.allowClientOutgoing(twimlAppSid)</code>
            <br/>

            Add a capability to the token generator which will allow the client to make outgoing calls,
            using the <a href="https://www.twilio.com/user/account/apps">TwiML app</a> with the given
            <tt>twimlAppSid</tt>

        <ul>
            <li><b>twimlAppSid:</b> {string} the SID of the TwiML app which will be used to make outgoing calls</li>
        </ul>
        <p>
        <p>Example:</p>
<pre>
var twilio = require('twilio');
var capability = new twilio.Capability(ACCOUNT_SID, AUTH_TOKEN);

//Create a capability token using the TwiML app with sid "AP123"
capability.allowClientOutgoing('AP123');
var token = capability.generate();
</pre>

        <p id="generate">
            <b class="header">generate</b><code>capability.generate([timeout])</code>
            <br/>

            Generate a capability token with the configured permissions, which by default will expire
            after one hour.

        <ul>
            <li><b>timeout (optional):</b> {number} time in seconds for the capability token to be valid</li>
        </ul>
        <p>
        <p>Example:</p>
<pre>
var twilio = require('twilio');
var capability = new twilio.Capability(ACCOUNT_SID, AUTH_TOKEN);

//Create a capability token using the TwiML app with sid "AP123", that expires in two minutes
capability.allowClientOutgoing('AP123');
var token = capability.generate(120);
</pre>

        <h2 id="utilities">Utilities</h2>

        <p id="validateRequest">
            <b class="header">validateRequest</b><code>twilio.validateRequest(authToken, header, url, params)</code>
            <br/>

            When Twilio sends a request to your web app, it sends a special header called <tt>X-Twilio-Signature</tt>.
            This header is a hashed value that we can use on the server side to confirm that a request has indeed
            originated from Twilio. More details on this security measure are located
            <a href="https://www.twilio.com/docs/security#validating-requests">here</a>.

            This function will return a boolean indicating whether or not, given the request URL, POST/GET parameters,
            and your auth token, a request was actually sent from Twilio.



            <ul>
                <li><b>authToken:</b> {string} your Twilio auth token</li>
                <li><b>header:</b> {string} the <tt>X-Twilio-Signature</tt> header sent by Twilio</li>
                <li><b>url:</b> {string} the URL requested by Twilio</li>
                <li><b>params:</b> {object} a JavaScript object containing key-value pairs of parameters sent by Twilio</li>
            </ul>
        <p>
        <p>Example:</p>
<pre>
var twilio = require('twilio'),
    http = require('http'),
    qs = require('querystring');

http.createServer(function (req, res) {

    if (req.method == 'POST') {
        var body = '';

        req.on('data', function (data) {
            body += data;
        });

        req.on('end', function () {

            var POST = qs.parse(body);

            //validate incoming request is from twilio using your auth token and the header from Twilio
            var token = 'YOUR_TWILIO_AUTH_TOKEN',
                header = req.headers['x-twilio-signature'];

            //validateRequest returns true if the request originated from Twilio
            if (twilio.validateRequest(token, header, 'http://twilio-raw.herokuapp.com', POST)) {
                //generate a TwiML response
                var resp = new twilio.TwimlResponse();
                resp.say('hello, twilio!');

                res.writeHead(200, { 'Content-Type':'text/xml' });
                res.end(resp.toString());
            }
            else {
                res.writeHead(403, { 'Content-Type':'text/plain' });
                res.end('you are not twilio - take a hike.');
            }
        });
    }
    else {
        res.writeHead(404, { 'Content-Type':'text/plain' });
        res.end('send a POST');
    }

}).listen(80);
</pre>

        <p id="validateExpressRequest">
            <b class="header">validateExpressRequest</b><code>twilio.validateExpressRequest(request, authToken)</code>
            <br/>

            This is a helper function which decomposes an <a href="http://expressjs.com/api.html#req.params">Express request object</a>
            and uses <a href="#validateRequest">validateRequest</a> to determine if the request was sent by Twilio.  Returns <tt>true</tt>
            if the request was sent by Twilio.

        <ul>
            <li><b>request:</b> {object} An Express Request object</li>
            <li><b>authToken:</b> {string} Your Twilio auth token</li>
        </ul>
        <p>
        <p>Example:</p>
<pre>
var express = require('express'),
    http = require('http'),
    path = require('path'),
    twilio = require('twilio');

var app = express();

app.configure(function () {
    /* Configure your express app... */
});

//Twilio request authentication
app.post('/twiml', function(req, res) {
    if (twilio.validateExpressRequest(req, 'YOUR_TWILIO_AUTH_TOKEN')) {
        var resp = new twilio.TwimlResponse();
        resp.say('express sez - hello twilio!');

        res.type('text/xml');
        res.send(resp.toString());
    }
    else {
        res.send('you are not twilio.  Buzz off.');
    }
});
</pre>


        <h2 id="links">Links &amp; Additional Resources</h2>
        <p>
            Usage of the Twilio platform requires a valid account SID and auth token.  You can sign up
            and receive those credentials <a href="https://www.twilio.com/try-twilio">here</a>.
        </p>

        <p>
            The official Twilio docs <a href="http://twilio.com/docs">are located here</a>.
        </p>

        <p>
            Helper libraries are available for a variety of environments and programming langauges -
            check out Twilio's <a href="http://github.com/twilio">GitHub repository here</a>.
        </p>

        <h2 id="changelog">Change Log</h2>

        <p>
            <b class="header">0.8.0</b> &mdash;
            <small><i>Feb. 12, 2013</i></small> &mdash;
            <a href="https://github.com/kwhinnery/twilio-node/compare/0.7.1...0.8.0">Diff</a>
            <br/>
        <ul>
            <li>Fixed numerous bugs with and added some missing subresources</li>
            <li>
                <p>
                    Added in a bit of sugar to alias underscore-separated properties in Twilio REST responses to
                    camel case to make it more JavaScripty. So <tt>data.smsMessages</tt> is aliases to <tt>data.sms_messages</tt>.
                    Also, auto-parsing <tt>Date</tt> objects for any response properties called:
                </p>
                <ul>
                    <li><tt>startDate</tt></li>
                    <li><tt>endDate</tt></li>
                    <li><tt>dateCreated</tt></li>
                    <li><tt>dateUpdated</tt></li>
                    <li><tt>startTime</tt></li>
                    <li><tt>endTime</tt></li>
                </ul>
                <p>
                    All underscore-separated values are the raw values passed back by Twilio in JSON.
                </p>
            </li>
            <li>Added ability to initialize RestClient from environment variables</li>
        </ul>
        </p>

        <p>
            <b class="header">0.7.1</b> &mdash;
            <small><i>Jan. 3, 2013</i></small> &mdash;
            <a href="https://github.com/kwhinnery/twilio-node/compare/0.7.0...0.7.1">Diff</a>
            <br/>
        <ul>
            <li>
                Moved client and Twilio request verification test apps to separate repos
            </li>
            <li>
                Added utilities for verifying Twilio requests
            </li>
        </ul>
        </p>

        <p>
            <b class="header">0.7.0</b> &mdash;
            <small><i>Dec. 28, 2012</i></small> &mdash;
            <a href="https://github.com/kwhinnery/twilio-node/compare/0.6.2...0.7.0">Diff</a>
            <br/>
        <ul>
            <li>
                Added capability token generator for Twilio Client
            </li>
            <li>
                Minor changes for rest client
            </li>
        </ul>
        </p>

        <p>
            <b class="header">0.6.2</b> &mdash;
            <small><i>Dec. 27, 2012</i></small> &mdash;
            <a href="https://github.com/kwhinnery/twilio-node/compare/0.6.1...0.6.2">Diff</a>
            <br/>
        <ul>
            <li>
                Added a "list" function as an alias for "get" for uniformity with other Twilio client SDKs
            </li>
            <li>
                Added the "Members" sub-resource to queues
            </li>
            <li>
                Hang the node client response off the second reponse argument, so only two callback arguments are required.
            </li>
        </ul>
        </p>

        <p>
            <b class="header">0.6.1</b> &mdash;
            <small><i>Dec. 21, 2012</i></small> &mdash;
            <a href="https://github.com/kwhinnery/twilio-node/compare/0.6.0...0.6.1">Diff</a>
            <br/>
        <ul>
            <li>
                Changed SMS and call shorthand function signature
            </li>
            <li>
                removed need to include the "account" in "client.(some resource)". You can now do
                "client.calls.get" instead of "client.accounts.calls.get".
            </li>
            <li>
                initialize a REST client in one line on require.
            </li>
        </ul>
        </p>

        <p>
            <b class="header">0.6.0</b> &mdash;
            <small><i>Dec. 20, 2012</i></small> &mdash;
            <a href="https://github.com/kwhinnery/twilio-node/compare/0.5.0...0.6.0">Diff</a>
            <br/>
        <ul>
            <li>
                Adding support for TwiML generation.
            </li>
            <li>
                Minor updates to the RestClient to remove dependency on pkginfo
            </li>
        </ul>
        </p>

        <p>
            <b class="header">0.5.0</b> &mdash;
            <small><i>Dec. 19, 2012</i></small> &mdash; <br/>
            <ul>
                <li>
                    Initial refactor release, exposes basic REST client API.
                </li>
            </ul>
        </p>

    </div>

</div>

</body>
</html>
